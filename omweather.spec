# 
# Do not Edit! Generated by:
# spectacle version 0.18
# 
# >> macros
%define all_x86 i386 i586 i686 %{ix86}
%define all_arm %{arm}
# << macros

Name:       omweather
Summary:    OMWeather
Version:    0.3.1
Release:    1
Group:      Applications/Internet
License:    GPLv2.1
URL:        https://garage.maemo.org/projects/omweather/
Source0:    %{name}-%{version}.tar.bz2
Source100:  omweather.yaml
BuildRequires:  pkgconfig(QtCore) >= 4.7.0
BuildRequires:  pkgconfig(libcurl)
BuildRequires:  pkgconfig(sqlite3)
BuildRequires:  pkgconfig(dbus-glib-1)
BuildRequires:  pkgconfig(libxml-2.0)
%ifarch %{all_x86} 
BuildRequires:  pkgconfig(meego-panel)
BuildRequires:  pkgconfig(mutter-plugins)
%endif
BuildRequires:  gettext
BuildRequires:  qt-qmake
BuildRequires:  libqt-devel
BuildRequires:  desktop-file-utils


%description
Weather Forecast on Nokia N900. Ultra-customisable weather widget for showing forecast the way you want.



%prep
%setup -q -n %{name}-%{version}

# >> setup
# << setup

%build
# >> build pre
#export PATH=/usr/lib/qt4/bin:$PATH
qmake PREFIX=%{_prefix} -r
make
# << build pre



# >> build post
# << build post
%install
rm -rf %{buildroot}
# >> install pre
# << install pre

# >> install post
make INSTALL_ROOT=%{buildroot} install
%ifarch %{all_x86}
ln -s /usr/share/omweather/icons  %{buildroot}/usr/share/meego-panel-omweather/theme/icons
%endif
rm %{buildroot}/usr/lib/libomweather-core.so
# << install post
desktop-file-install --delete-original       \
  --dir %{buildroot}%{_datadir}/applications             \
   %{buildroot}%{_datadir}/applications/*.desktop



%post
# >> post
/sbin/ldconfig
# << post

%postun
# >> postun
/sbin/ldconfig
# << postun


%files
%defattr(-,root,root,-)
/usr/bin/omweather-qml
/usr/bin/omweather-settings
%{_datadir}/applications/*.desktop
%{_libdir}
/usr/share/omweather
/usr/share/locale
/usr/lib/omweather/weathercom
/usr/share/omweather/copyright_icons/weather.com.png
/usr/share/omweather/db/weather.com.db
/usr/share/omweather/sources/weather.com.xml
# >> files
%ifarch %{all_x86}
%{_libexecdir}/meego-panel-omweather
/usr/share/meego-panel-omweather
/usr/share/mutter-meego/panels/meego-panel-omweather.desktop
/etc/xdg
/usr/share/dbus-1/services
%endif
%changelog
* Sun Feb 13 2010  Vlad Vasilyeu <vasvlad@gmail.com> 0.3.1 
  * Added QML version of Omweather
* Wed Feb 9 2010 Vlad Vasilyeu <vasvlad@gmail.com> 0.3
  * Initial version
# << files


